///////////////////////////////////////////////////////////////////////////////
// Header guard
///////////////////////////////////////////////////////////////////////////////
#pragma once

///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "../../Arcade/utils/Vec2.hpp"
#include "games/PACMAN/Player.hpp"
#include <memory>

///////////////////////////////////////////////////////////////////////////////
// Namespace Arc::Pacman
///////////////////////////////////////////////////////////////////////////////
namespace Arc::Pacman
{

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
///////////////////////////////////////////////////////////////////////////////
class Ghost
{
public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    enum class Type
    {
        BLINKY,
        PINKY,
        INKY,
        CLYDE
    };

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    enum class State
    {
        FRIGHTENED,
        CHASING,
        IDLING,
        KILLED
    };

private:
    ///////////////////////////////////////////////////////////////////////////
    //
    ///////////////////////////////////////////////////////////////////////////
    Type mType;                     //<!
    State mState;                   //<!
    Vec2f mPosition;                //<!
    Vec2i mDirection;               //<!
    float mMovementSpeed;           //<!
    float mMovementAccumulator;     //<!

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    Ghost(Type type);

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param pacmanPos
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    Vec2i GetNextPosition(Vec2i pacmanPos);

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    State GetState(void) const;

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param state
    ///
    ///////////////////////////////////////////////////////////////////////////
    void SetState(State state);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param deltaSeconds
    /// \param pacmanPos
    ///
    ///////////////////////////////////////////////////////////////////////////
    void Update(float deltaSeconds, Vec2i pacmanPos);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param timer
    ///
    ///////////////////////////////////////////////////////////////////////////
    void Draw(float timer);
};

} // namespace Arc::Pacman
